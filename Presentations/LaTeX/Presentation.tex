\documentclass[numberofslides]{AMSBeamer}
%% Options: 
%% numberofslides: show total number of slides
%% noAMSLogo: do not show AMS Logo


%\usepackage{import} %use includefrom instead import to use includeonly
%% include only specific texfile:
% \includeonly{subdirectory/texfile}
%% include only labeled frame:
% \includeonlyframes{title,label}


%% decrease title font if necessary
%\setbeamerfont{title}{series=\bfseries,size=\fontsize{14}{18}}

%% margins for title can also be changed:
% \makeatletter
% \setlength\title@titlemargin{13mm}\setlength\title@institutemargin\title@titlemargin
% \makeatother

%% Title:
\title[Navigation and Localization]{Navigation and Localization of the Hamster Robot}

%% Subtitle:
%\subtitle{Subtitle}

\author{Wiebke Outzen, Johnson Yarlagadda, Phillipp Grill and  Undine Holst}

\institute[Autonomous Multisensor Systems Group]{
	Autonomous Multisensor Systems Group \\
	Institute for Intelligent Cooperating Systems \\
	Faculty of Computer Science \\
	Otto von Guericke University Magdeburg
}
\mode<presentation>{\keywords{Schlüsselwörter durch Komma getrennt}}

\date{14.11.2023}%{Datum der Präsentation, \zB 1. Januar 2016}

\begin{document}


\begin{frame}[label=title]
	\maketitle
\end{frame}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Slide without tikz or textblock
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{frame}[label=agenda]
  \frametitle{Agenda}
   \tableofcontents
\end{frame}

\section{Familiarization}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
    \begin{itemize}
        \item ROS structure
        \item Controlling the robot via keyboard/joystick
        \item Teleop\_twist
    \end{itemize}
    \vspace{1cm}
    \begin{figure}
        \centering
        \includegraphics[width=12cm]{Presentations/LaTeX/images/Teleop_twist.png}
        \caption{Structure of the nodes}
    \end{figure}
\end{frame}
%---------------------------------------------------------------------

\section{Generate a map}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
    \begin{minipage}{0.5\textwidth}
        \begin{itemize}
            \item Slam\_gmapping
            \item Drive with controller until map in rviz is clear
            \item With \texttt{map\_server} \texttt{map\_saver}
        \end{itemize}
    \end{minipage}%
    \begin{minipage}{0.5\textwidth}
        \begin{figure}
            \centering
                \includegraphics[width=0.8\textwidth]{Presentations/LaTeX/images/map334.jpg}
                \caption{Map of Room 334}
            \label{fig:enter-label}
        \end{figure}
        
    \end{minipage}  
\end{frame}
%---------------------------------------------------------------------

\section{Setup of the navstack}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
        \begin{itemize}
        \item Followed ROS tutorial
        \item First with default planners
            \begin{itemize}
                \item Local: \ \texttt{base\_local\_planner/TrajectoryPlannerROS}
                \item Global: \texttt{navfn/NavfnROS}
            \end{itemize}
        \item New repo hamster\textunderscore2dnav
    \end{itemize}

        \begin{figure}
                \centering
                \includegraphics[width=0.7\linewidth]{Presentations/LaTeX/images/nav_stack_tutorial.png}
                \caption{Navigation Stack on a Robot}
                \label{fig:enter-label}
        \end{figure}
\end{frame}
%---------------------------------------------------------------------

\section{The first challenges}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
\begin{itemize}
  \item Overwriting of map:
  \begin{itemize}
    \item During trying out \texttt{move\_base.launch}
    \item Solution: kill \texttt{slam\_gmapping}
  \end{itemize}
  \item Planner was not supporting Ackermann, 2 options:
  \begin{itemize}
    \item \texttt{sbpl\_lattice\_planner}
    \item \texttt{teb\_local\_planner}
  \end{itemize}
\end{itemize}

\end{frame}
%---------------------------------------------------------------------
\section{SBPL planner integration}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
    \begin{minipage}{0.7\textwidth}
        \begin{itemize}
            \item No tutorial
            \begin{itemize}
                \item Installed node and tried to integrate it
            \end{itemize}
            \item SBPL requires motion primitive file
            \begin{itemize}
                \item Was not provided by Cogniteam
                \item Generation by matlab script, but just for robots turning in place
            \end{itemize}
        \end{itemize}
    \end{minipage}%
    \begin{minipage}{0.3\textwidth}
        \begin{figure}
            \includegraphics[width = \textwidth]{Presentations/LaTeX/images/mprim.jpeg}
            \caption{mprim file}
        \end{figure}
    \end{minipage}
\end{frame}
%---------------------------------------------------------------------
\section{TEB planner integration}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
     \begin{minipage}{0.7\textwidth}

\begin{itemize}
  \item Utilizes the Timed Elastic Band method for path planning.
  \item Accommodates non-holonomic and kinematic constraints of vehicles.
  \item Supports obstacle avoidance using costmaps.
  \item Offers a variety of customizable parameters for tailored planning.
  \item Compatible with ROS \texttt{move\_base} node.
\end{itemize}
    \end{minipage}%
    \begin{minipage}{0.3\textwidth}
        \vspace{1cm}

        \begin{figure}
            \centering
            \includegraphics[width=1\linewidth]{Presentations/LaTeX/images/teb.png}
            \caption{TEB planner}
            \label{fig:enter-label}
        \end{figure}
    \end{minipage}
\end{frame}
%---------------------------------------------------------------------
\section{Challenge: localization}
\begin{frame}[label=agenda]
	\frametitle{\insertsectionhead}%
     \begin{itemize}
        \item Inaccurate odometry provided by Cogniteam
        \begin{itemize}
            \item Durch Ackermann-Steuerung funktioniert Lokalisation durch Odometrie nicht
            \item Lokalisation soll nur durch LaserScan funktionieren
        \end{itemize}
        \item \texttt{laser\_scan\_matcher}
        \begin{itemize}
            \item Create fake odometry to be provided to amcl for localization
        \end{itemize}
     \end{itemize}
\end{frame}

%---------------------------------------------------------------------
%\section{}
%\begin{frame}[label=agenda]
%	\frametitle{\insertsectionhead}%
% \begin{figure}[h!]
%   \centering
%   \includemedia[
%     width=0.6\linewidth,
%     height=0.45\linewidth,
%     activate=pageopen,
%     addresource=Presentations/LaTeX/images/Video.MOV, % Pfad zu Ihrer Videodatei
%     flashvars={
%       source=Presentations/LaTeX/images/Video.MOV % Der Dateiname muss nach 'addresource' wiederholt werden
%       &autoPlay=true % Video wird automatisch abgespielt, wenn das PDF geöffnet wird
%     }
%   ]{}{VPlayer.swf}
%   \caption{Demonstration des TEB Local Planners.}
% \end{figure}
%\end{frame}

%---------------------------------------------------------------------
\section{TEB parametrization}
\begin{frame}{label=agenda}
    \frametitle{\insertsectionhead}
    \begin{itemize}
        \item Minimum turning radius
        \item Footprint model (point)
        \item Publish feedback
        \item Maximum acceleration
        \item Wheelbase
        \item Goal tolerance (angle and euclidean distance)
        \item Min\_obstacle\_dist

    \end{itemize}
\end{frame}

%---------------------------------------------------------------------
\section{Emergency Stop}
\begin{frame}{label=agenda}
    \frametitle{\insertsectionhead}
    \begin{minipage}{0.4\textwidth}
        \begin{itemize}
            \item Robot stops when there are points registered:
            \begin{itemize}
                \item Between min\_angle and max\_angle
                \item Nearer than obstacle\_distance
            \end{itemize}
            \item \texttt{twist\_mux} to get correct priorities for input
        \end{itemize}
    \end{minipage}%
    \begin{minipage}{0.6\textwidth}
        \begin{figure}
            \centering
            \includegraphics[width=\textwidth]{Presentations/LaTeX/images/twist_mux.jpeg}
            \caption{Structure of the twist\_mux}
            \label{fig:enter-label}
        \end{figure}
    \end{minipage}
\end{frame}

%---------------------------------------------------------------------
\begin{frame}{label=agenda}
    \frametitle{\insertsectionhead}
    \begin{center}
        \includegraphics[width=0.8\textwidth]{Presentations/LaTeX/images/estop-normal.jpeg}
    \end{center}
\end{frame}

%---------------------------------------------------------------------
\begin{frame}{label=agenda}
    \frametitle{\insertsectionhead}
    \begin{center}
        \includegraphics[width=0.8\textwidth]{Presentations/LaTeX/images/estop-ausnahmefall.jpeg}
    \end{center}
\end{frame}

%---------------------------------------------------------------------
\section{Point Cloud}
\begin{frame}{label=agenda}
    \frametitle{\insertsectionhead}
    \begin{itemize}
        \item Camera doesn’t acquire point cloud data but depth images
        \item Hardware does not allow working with point clouds
        \item If hardware allows using point clouds: package laserscan-to-pointcloud
        \item Implement nodes that subscribe to data input and publish LaserScan data to next node (emergency stop)

    \end{itemize}
\end{frame}

%---------------------------------------------------------------------
\section{Battery Warning}
\begin{frame}{label=agenda}
    \frametitle{\insertsectionhead}
    \begin{itemize}
        \item Battery suddenly died
        \item Warning for battery value below 3.4V
        \item Error for battery value 3 consecutive times below 3.4V
    \end{itemize}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Thank you slide
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begingroup% to remove header and footline and include style of first slide
\setbeamertemplate{header}{}
\setbeamertemplate{footline}{}
\begin{frame}[label=overview]
	\frametitle{Thank You For Your Attention!}%
	\begin{tikzpicture}[overlay, remember picture, shift={(current page.south west)}, inner sep=0pt, outer sep=0pt]

		\useasboundingbox (0,0) rectangle (160mm,90mm);%

		\node[anchor=south east] at (150mm,7mm) {\includegraphics[width=50mm]{logos/AMS.pdf}};%

		\fill[ovgu-inf-blue] (0,90mm) rectangle (160mm,55mm);
		\node[anchor=north east] at (160mm,90mm) {\includegraphics{./logos/otto.pdf}};
		% \makeatletter
		\node[anchor=north west] at (14mm,87mm) {\includegraphics[height=11mm]{./logos/Signet_INF_1_inv.pdf}};	
		% \makeatother
		\node[anchor=south west, text width=160mm-28mm] at (14mm,55mm+5mm) {\color{white}\usebeamerfont{title}\inserttitle\par};

		\node[anchor=north west, text width=160mm-28] at (14mm,55mm-15mm) {%
			{\usebeamerfont{title}\color{AMSblue}\insertframetitle\par}%
		};			

	

	\end{tikzpicture}
    % \Notes{

    % }
    \transfade[duration=5]%<2->
\end{frame}	
\endgroup

\end{document}
